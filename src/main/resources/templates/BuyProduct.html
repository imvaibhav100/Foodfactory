<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.com">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>FoodFactory - Dashboard</title>
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<style>
	:root {
		--primary-color: #ff6b35;
		--primary-light: #ff9f1c;
		--secondary-color: #2ec4b6;
		--dark-bg: #0f0f1a;
		--darker-bg: #1a1a2e;
		--card-bg: rgba(255, 255, 255, 0.05);
		--glass-border: rgba(255, 255, 255, 0.1);
		--text-primary: #ffffff;
		--text-secondary: rgba(255, 255, 255, 0.7);
		--gradient-1: linear-gradient(135deg, #ff6b35, #ff9f1c);
		--gradient-2: linear-gradient(135deg, #2ec4b6, #20a4f3);
		--shadow-glow: 0 0 40px rgba(255, 107, 53, 0.3);
	}

	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
		font-family: 'Poppins', sans-serif;
	}

	body {
		min-height: 100vh;
		background: var(--dark-bg);
		background-image: 
			radial-gradient(ellipse at 20% 20%, rgba(255, 107, 53, 0.15) 0%, transparent 50%),
			radial-gradient(ellipse at 80% 80%, rgba(46, 196, 182, 0.1) 0%, transparent 50%),
			url("https://images.pexels.com/photos/7219747/pexels-photo-7219747.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1");
		background-size: cover;
		background-position: center;
		background-attachment: fixed;
		padding-top: 80px;
		position: relative;
	}

	/* User Navigation Bar */
	.user-nav {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		height: 70px;
		background: rgba(15, 15, 26, 0.95);
		backdrop-filter: blur(20px);
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0 40px;
		z-index: 1000;
		border-bottom: 1px solid var(--glass-border);
	}

	.nav-brand {
		display: flex;
		align-items: center;
		gap: 10px;
		font-size: 1.5rem;
		font-weight: 700;
		color: var(--primary-color);
	}

	.nav-brand i {
		font-size: 1.8rem;
	}

	.nav-links {
		display: flex;
		list-style: none;
		gap: 10px;
	}

	.nav-links a {
		color: var(--text-secondary);
		text-decoration: none;
		padding: 10px 18px;
		border-radius: 10px;
		transition: all 0.3s ease;
		font-weight: 500;
		display: flex;
		align-items: center;
		gap: 8px;
	}

	.nav-links a:hover, .nav-links a.active {
		color: var(--text-primary);
		background: rgba(255, 107, 53, 0.2);
	}

	.nav-links a.active {
		background: var(--gradient-1);
	}

	.nav-user {
		display: flex;
		align-items: center;
		gap: 15px;
	}

	.user-greeting {
		color: var(--text-secondary);
		display: flex;
		align-items: center;
		gap: 8px;
	}

	.user-greeting i {
		font-size: 1.3rem;
		color: var(--primary-color);
	}

	.logout-btn {
		padding: 10px 20px;
		background: rgba(255, 71, 87, 0.2);
		color: #ff4757;
		text-decoration: none;
		border-radius: 10px;
		font-weight: 500;
		transition: all 0.3s ease;
		display: flex;
		align-items: center;
		gap: 8px;
	}

	.logout-btn:hover {
		background: #ff4757;
		color: white;
	}

	.quick-actions .action-btn {
		display: inline-flex;
		align-items: center;
		gap: 8px;
		padding: 12px 25px;
		background: rgba(255, 255, 255, 0.2);
		color: white;
		text-decoration: none;
		border-radius: 50px;
		font-weight: 500;
		transition: all 0.3s ease;
		border: 2px solid rgba(255, 255, 255, 0.3);
	}

	.quick-actions .action-btn:hover {
		background: white;
		color: var(--primary-color);
	}

	body::before {
		content: '';
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(15, 15, 26, 0.85);
		z-index: 0;
	}

	.container {
		position: relative;
		z-index: 1;
		max-width: 1200px;
		margin: 0 auto;
	}

	/* Welcome Banner */
	.welcome-banner {
		background: var(--gradient-1);
		border-radius: 20px;
		padding: 25px 40px;
		margin-bottom: 30px;
		display: flex;
		align-items: center;
		justify-content: space-between;
		box-shadow: var(--shadow-glow);
		animation: slideDown 0.6s ease-out;
	}

	@keyframes slideDown {
		from {
			opacity: 0;
			transform: translateY(-30px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.welcome-text {
		display: flex;
		align-items: center;
		gap: 15px;
	}

	.welcome-text i {
		font-size: 2.5rem;
		color: white;
	}

	.welcome-text h2 {
		color: white;
		font-size: 1.5rem;
		font-weight: 600;
	}

	.welcome-text span {
		color: var(--darker-bg);
		font-weight: 700;
	}

	.back-btn {
		display: inline-flex;
		align-items: center;
		gap: 8px;
		padding: 12px 25px;
		background: rgba(0, 0, 0, 0.2);
		color: white;
		text-decoration: none;
		border-radius: 50px;
		font-weight: 500;
		transition: all 0.3s ease;
		border: 2px solid rgba(255, 255, 255, 0.3);
	}

	.back-btn:hover {
		background: white;
		color: var(--primary-color);
		transform: translateX(-5px);
	}

	/* Search Section */
	.search-section {
		background: var(--card-bg);
		backdrop-filter: blur(20px);
		border: 1px solid var(--glass-border);
		border-radius: 20px;
		padding: 40px;
		margin-bottom: 30px;
		animation: fadeIn 0.8s ease-out 0.2s both;
	}

	@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.search-section h1 {
		color: var(--text-primary);
		font-size: 1.8rem;
		margin-bottom: 25px;
		display: flex;
		align-items: center;
		gap: 12px;
	}

	.search-section h1 i {
		color: var(--primary-color);
	}

	.search-form {
		display: flex;
		gap: 15px;
		flex-wrap: wrap;
	}

	.search-form input {
		flex: 1;
		min-width: 300px;
		padding: 18px 25px;
		background: rgba(255, 255, 255, 0.08);
		border: 2px solid var(--glass-border);
		border-radius: 15px;
		color: var(--text-primary);
		font-size: 1rem;
		transition: all 0.3s ease;
	}

	.search-form input::placeholder {
		color: var(--text-secondary);
	}

	.search-form input:focus {
		outline: none;
		border-color: var(--primary-color);
		box-shadow: 0 0 20px rgba(255, 107, 53, 0.2);
	}

	.search-btn {
		padding: 18px 40px;
		background: var(--gradient-1);
		border: none;
		border-radius: 15px;
		color: white;
		font-size: 1rem;
		font-weight: 600;
		cursor: pointer;
		display: flex;
		align-items: center;
		gap: 10px;
		transition: all 0.3s ease;
	}

	.search-btn:hover {
		transform: translateY(-3px);
		box-shadow: 0 10px 30px rgba(255, 107, 53, 0.4);
	}

	.error-msg {
		color: #ff4757;
		margin-top: 15px;
		font-size: 0.95rem;
	}

	/* Product Details Card */
	.product-card {
		background: var(--card-bg);
		backdrop-filter: blur(20px);
		border: 1px solid var(--glass-border);
		border-radius: 20px;
		padding: 40px;
		margin-bottom: 30px;
		animation: fadeIn 0.8s ease-out 0.4s both;
	}

	.product-card h2 {
		color: var(--text-primary);
		font-size: 1.5rem;
		margin-bottom: 25px;
		display: flex;
		align-items: center;
		gap: 12px;
	}

	.product-card h2 i {
		color: var(--secondary-color);
	}

	.product-form {
		display: grid;
		gap: 20px;
	}

	.form-group {
		display: flex;
		flex-direction: column;
		gap: 8px;
	}

	.form-group label {
		color: var(--text-secondary);
		font-size: 0.9rem;
		font-weight: 500;
	}

	.form-group input {
		padding: 15px 20px;
		background: rgba(255, 255, 255, 0.08);
		border: 2px solid var(--glass-border);
		border-radius: 12px;
		color: var(--text-primary);
		font-size: 1rem;
		transition: all 0.3s ease;
	}

	.form-group input:focus {
		outline: none;
		border-color: var(--secondary-color);
		box-shadow: 0 0 20px rgba(46, 196, 182, 0.2);
	}

	.form-group input[readonly] {
		background: rgba(46, 196, 182, 0.1);
		border-color: rgba(46, 196, 182, 0.3);
	}

	.order-btn {
		padding: 18px 40px;
		background: var(--gradient-2);
		border: none;
		border-radius: 15px;
		color: white;
		font-size: 1.1rem;
		font-weight: 600;
		cursor: pointer;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		gap: 10px;
		transition: all 0.3s ease;
		margin-top: 10px;
	}

	.order-btn:hover {
		transform: translateY(-3px);
		box-shadow: 0 10px 30px rgba(46, 196, 182, 0.4);
	}

	/* Orders Table */
	.orders-section {
		background: var(--card-bg);
		backdrop-filter: blur(20px);
		border: 1px solid var(--glass-border);
		border-radius: 20px;
		padding: 40px;
		animation: fadeIn 0.8s ease-out 0.6s both;
	}

	.orders-section h2 {
		color: var(--text-primary);
		font-size: 1.5rem;
		margin-bottom: 25px;
		display: flex;
		align-items: center;
		gap: 12px;
	}

	.orders-section h2 i {
		color: var(--primary-light);
	}

	.orders-table {
		width: 100%;
		border-collapse: collapse;
		overflow: hidden;
		border-radius: 15px;
	}

	.orders-table thead {
		background: var(--gradient-1);
	}

	.orders-table th {
		padding: 18px 15px;
		text-align: left;
		color: white;
		font-weight: 600;
		font-size: 0.95rem;
		text-transform: uppercase;
		letter-spacing: 0.5px;
	}

	.orders-table tbody tr {
		border-bottom: 1px solid var(--glass-border);
		transition: all 0.3s ease;
	}

	.orders-table tbody tr:hover {
		background: rgba(255, 107, 53, 0.1);
	}

	.orders-table td {
		padding: 18px 15px;
		color: var(--text-primary);
		font-size: 0.95rem;
	}

	.orders-table td:first-child {
		font-weight: 600;
		color: var(--secondary-color);
	}

	.orders-table td:nth-child(4) {
		color: var(--primary-light);
		font-weight: 600;
	}

	/* Responsive */
	@media (max-width: 768px) {
		body {
			padding: 15px;
		}

		.welcome-banner {
			flex-direction: column;
			gap: 20px;
			text-align: center;
			padding: 20px;
		}

		.search-form {
			flex-direction: column;
		}

		.search-form input {
			min-width: 100%;
		}

		.orders-table {
			display: block;
			overflow-x: auto;
		}

		.welcome-text h2 {
			font-size: 1.2rem;
		}
	}
</style>

<body>
	<!-- User Navigation Bar -->
	<nav class="user-nav">
		<div class="nav-brand">
			<i class="fas fa-utensils"></i>
			<span>FoodFactory</span>
		</div>
		<ul class="nav-links">
			<li><a href="/user/home"><i class="fas fa-home"></i> Home</a></li>
			<li><a href="/user/products"><i class="fas fa-shopping-bag"></i> Products</a></li>
			<li><a href="/user/dashboard" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
			<li><a href="/user/location"><i class="fas fa-map-marker-alt"></i> Locate Us</a></li>
			<li><a href="/user/about"><i class="fas fa-info-circle"></i> About</a></li>
		</ul>
		<div class="nav-user">
			<span class="user-greeting"><i class="fas fa-user-circle"></i> <span th:text="${name}">User</span></span>
			<a href="/user/logout" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
		</div>
	</nav>

	<div class="container">
		<!-- Welcome Banner -->
		<div class="welcome-banner">
			<div class="welcome-text">
				<i class="fas fa-user-circle"></i>
				<h2>Welcome Back, <span th:text="${name}">User</span>! ðŸ‘‹</h2>
			</div>
			<div class="quick-actions">
				<a href="/user/products" class="action-btn">
					<i class="fas fa-shopping-cart"></i> Browse Menu
				</a>
			</div>
		</div>

		<!-- Search Section -->
		<div class="search-section">
			<h1><i class="fas fa-search"></i> Product Search</h1>
			<form th:action="@{/product/search}" method="post" class="search-form">
				<input type="text" name="productName" required placeholder="ðŸ• Enter product name to search...">
				<button type="submit" class="search-btn">
					<i class="fas fa-search"></i> Search
				</button>
			</form>
			<p class="error-msg" th:text="${message}"></p>
		</div>

		<!-- Product Details (shown when product is found) -->
		<div th:if="${product!=null}" class="product-card">
			<h2><i class="fas fa-utensils"></i> Product Details</h2>
			<form th:action="@{/product/order}" th:object="${product}" method="post" class="product-form">
				<div class="form-group">
					<label><i class="fas fa-tag"></i> Product Name</label>
					<input type="text" name="oName" th:value="${product.pname}" readonly />
				</div>
				<div class="form-group">
					<label><i class="fas fa-rupee-sign"></i> Product Price</label>
					<input type="text" name="oPrice" th:value="${product.pprice}" readonly />
				</div>
				<div class="form-group">
					<label><i class="fas fa-balance-scale"></i> Quantity (KG)</label>
					<input type="number" placeholder="Minimum: 1 KG" min="1" name="oQuantity" required />
				</div>
				<button type="submit" class="order-btn">
					<i class="fas fa-shopping-cart"></i> Place Order
				</button>
			</form>
		</div>

		<!-- Orders Table -->
		<div th:if="${orders!=null}" class="orders-section">
			<h2><i class="fas fa-receipt"></i> Your Orders</h2>
			<table class="orders-table">
				<thead>
					<tr>
						<th><i class="fas fa-box"></i> Product</th>
						<th><i class="fas fa-rupee-sign"></i> Price</th>
						<th><i class="fas fa-sort-amount-up"></i> Qty</th>
						<th><i class="fas fa-coins"></i> Total</th>
						<th><i class="fas fa-calendar"></i> Date</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="order : ${orders}">
						<td th:text="${order.oName}"></td>
						<td>â‚¹<span th:text="${order.oPrice}"></span></td>
						<td th:text="${order.oQuantity}"></td>
						<td>â‚¹<span th:text="${order.totalAmmout}"></span></td>
						<td th:text="${#dates.format(order.orderDate, 'dd MMM yyyy, hh:mm a')}"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</body>

</html>